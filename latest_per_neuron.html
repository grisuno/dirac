<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Weight Space - Per Neuron (PCA)</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
        #plot { width: 100vw; height: 100vh; }
        #info { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.8); 
                 color: white; padding: 15px; border-radius: 8px; font-size: 12px; z-index: 1000; }
    </style>
</head>
<body>
    <div id="info">
        <strong>Weight Space - Per Neuron (PCA)</strong><br>
        Points: <span id="count">136</span><br>
        Method: Standard PCA/t-SNE<br>
        <hr>
        Controls:<br>
        - Drag to rotate<br>
        - Scroll to zoom<br>
        - Double-click to reset
    </div>
    <div id="plot"></div>
    <script>
        const labels = ["expansion_proj.weight", "input_proj.weight", "output_proj.weight", "contraction_proj.weight"];
        const colorIndices = [0, 1, 2, 3];
        const x = [0.14957311749458313, 0.05740738287568092, 0.05873239040374756, 0.1374409794807434, -0.31178316473960876, -0.3045821785926819, -0.14773762226104736, 0.04298705980181694, 0.14967145025730133, 0.25018373131752014, -0.16808953881263733, -0.15846918523311615, 0.17229129374027252, -0.33572980761528015, -0.06832049041986465, 0.0222020223736763, -0.3057943284511566, 0.13568709790706635, 0.033187590539455414, -0.5362067818641663, -0.18585118651390076, -0.04101358726620674, 0.3027838170528412, 0.06162380054593086, -0.006915465462952852, -0.14558759331703186, 0.14468823373317719, 0.3557642698287964, 0.27841615676879883, -0.3996652364730835, 0.27400314807891846, -0.151923269033432, 0.6367658972740173, -0.03117251582443714, -0.4448067545890808, -0.13067980110645294, -0.5417614579200745, 0.9163950085639954, 0.3861486315727234, 0.1456780880689621, -0.878053605556488, -1.0206878185272217, 0.46051618456840515, 0.259917676448822, 0.49253585934638977, -0.4692958891391754, 0.1845843493938446, 0.10771957039833069, 0.03348787873983383, 0.19567811489105225, 0.5318423509597778, 0.3131375014781952, 0.5410679578781128, -0.26669344305992126, -0.2692853808403015, 0.6565593481063843, -0.4065508246421814, 0.281526654958725, -0.5607296824455261, 0.3206254839897156, 0.8862258791923523, -0.39129799604415894, -0.04675116017460823, 0.6690393686294556, -0.05635474994778633, 0.7504178285598755, 0.885394275188446, 0.6968870162963867, 0.9760573506355286, 0.06127092242240906, -0.2298390120267868, -0.591315507888794, 0.2831169664859772, 0.4831089675426483, -0.2883926331996918, 0.22361119091510773, 0.11577367037534714, -0.5930636525154114, 0.31063008308410645, 0.21951545774936676, -1.4391446113586426, -0.1548653393983841, -1.2457243204116821, -0.11341927200555801, -0.6760216951370239, -0.10929757356643677, -0.9291634559631348, -0.2441856861114502, 0.28071972727775574, 0.8845272064208984, -0.09551665186882019, 0.08153249323368073, 0.9999229907989502, -0.15814074873924255, -0.1621132344007492, 0.449319452047348, -6.795665740966797, 0.6473149061203003, -3.7891032695770264, 5.829185962677002, -0.4733024835586548, 0.3865731656551361, 1.9886040687561035, -0.2401471734046936, -0.24389903247356415, -2.608739137649536, 0.7809702754020691, 2.8807802200317383, 1.9230761528015137, -6.959503173828125, -5.436373710632324, 5.130124568939209, -8.375770568847656, 4.206786155700684, -5.163321018218994, -3.219912528991699, 7.149770259857178, 6.131814956665039, -1.5526221990585327, -2.349703550338745, -4.794214725494385, 5.817115306854248, 2.1814112663269043, 5.2798027992248535, 1.9752066135406494, 0.8172301650047302, -3.3136069774627686, -2.248453140258789, 0.3433959186077118, 0.7481662034988403, 0.8952261805534363, 0.1934993416070938, -0.11891567707061768, 0.07865579426288605, -0.11755788326263428, -0.11979448795318604];
        const y = [0.2025049328804016, -0.16753844916820526, -0.10036344826221466, 0.02274736948311329, 0.08432792872190475, -0.028237398713827133, -0.09063193202018738, -0.19053597748279572, -0.3140082061290741, -0.19759666919708252, 0.21028222143650055, -0.12895774841308594, -0.34680071473121643, 0.1895202100276947, -0.1291312873363495, -0.2501299977302551, 0.05149175599217415, 0.278959721326828, 0.12880536913871765, 0.021261414512991905, -0.10822323709726334, -0.19460588693618774, -0.06374625861644745, -0.09302053600549698, -0.15091635286808014, -0.01665179431438446, -0.4113176763057709, -0.41760027408599854, -0.34972456097602844, -0.10566960275173187, -0.38366076350212097, 0.09667396545410156, 0.12080667912960052, -1.0113838911056519, 0.5878584384918213, -0.8410008549690247, 0.2871549427509308, -0.48717719316482544, 0.39109915494918823, -0.17616680264472961, -0.3288189172744751, 0.1515919268131256, -0.06453946977853775, 0.4104304015636444, 0.122329480946064, 0.45148470997810364, -0.046151917427778244, -0.45019835233688354, 0.1146901398897171, -0.7552971243858337, -0.8508074283599854, -0.5462000966072083, -0.6987969875335693, -0.26877260208129883, 0.6742076873779297, 0.06665899604558945, -1.0818636417388916, 0.12449813634157181, -1.2119523286819458, 0.12324702739715576, -0.5907524228096008, 0.2101767361164093, 0.003141979454085231, -0.756756603717804, 1.0475337505340576, 0.36430439352989197, 0.38622885942459106, -0.49692627787590027, -0.6736225485801697, 0.8718762397766113, -0.3852865993976593, 1.6151405572891235, 1.3468055725097656, -1.030146837234497, 0.982951283454895, -0.2913147807121277, -0.8273671865463257, -0.7583703994750977, 0.16684381663799286, -0.6951786875724792, 0.6325210928916931, -0.03239612653851509, -0.38831692934036255, -0.14335578680038452, 0.07926485687494278, 0.3129737079143524, 0.015063836239278316, -0.23356078565120697, 0.17469100654125214, -0.5115923881530762, 0.48537734150886536, -0.6201632022857666, -0.24271802604198456, 0.0037948708049952984, -0.7685714960098267, 0.36578568816185, 0.665088951587677, -2.7566254138946533, -3.0888688564300537, 0.2205478698015213, -4.9382500648498535, 2.3904941082000732, 4.715025424957275, 8.119736671447754, -4.062939643859863, 4.042806625366211, 0.7645848989486694, 6.138537883758545, -1.994003176689148, 0.7473440766334534, -4.21234655380249, -0.07796841114759445, -4.311148166656494, -0.6421359181404114, 3.866424798965454, 2.812730312347412, -1.653477430343628, 5.677577972412109, 5.803544044494629, -0.1741720587015152, -3.824427604675293, -1.30733060836792, -7.254817485809326, -5.547704219818115, 0.23352795839309692, -0.31770220398902893, 2.2335431575775146, 5.3197340965271, -0.048844609409570694, -0.41579902172088623, 0.015431123785674572, 0.9266295433044434, -0.33018359541893005, 0.04458422213792801, 0.0007582526304759085, 0.7475758194923401];
        const z = [-0.3146958351135254, -0.5881251096725464, -0.17760519683361053, 0.06728041172027588, 0.08666134625673294, 0.1471482664346695, 0.0815780833363533, 0.42545440793037415, -0.009153798222541809, 0.1821500062942505, 0.37450289726257324, 0.2024320662021637, 0.01895320415496826, -0.2570822536945343, 0.46241697669029236, -0.5791956782341003, 0.8614987134933472, -0.3743343949317932, 0.05739201232790947, 0.427779883146286, 0.2896948754787445, -0.31020355224609375, -0.11131370067596436, 0.1559808999300003, -0.03569162264466286, 0.4932752251625061, -0.1278814822435379, -0.07133518904447556, 0.11802417784929276, 0.13851311802864075, 0.0328688770532608, 0.03529687225818634, 0.15396614372730255, 0.16862255334854126, 0.600287139415741, -0.8126235604286194, -0.560887336730957, -1.026665449142456, -0.3631244897842407, 0.6463944911956787, -1.0844248533248901, 0.6229466199874878, 0.6315057873725891, 0.548034131526947, 0.9302862286567688, 0.48294374346733093, -0.527732253074646, 0.08827784657478333, 0.4483284056186676, 0.5521559119224548, 1.2597746849060059, 1.6420180797576904, 0.4633721113204956, 0.2890373170375824, 0.17755892872810364, 0.46510565280914307, 0.056542567908763885, -1.152288794517517, -0.9961434602737427, -0.7966179251670837, 0.36495596170425415, 0.8270117044448853, 0.9580193161964417, 0.11297522485256195, -1.4528324604034424, 1.3272267580032349, 0.8882883787155151, 0.23497365415096283, 1.303317666053772, 0.1430513858795166, -0.7404251098632812, -0.652076244354248, 1.0238291025161743, -0.9085196852684021, 0.3036491572856903, 0.386072039604187, 0.3607384264469147, 0.21529392898082733, -0.583808183670044, 0.06909966468811035, -0.35508930683135986, 0.22036264836788177, -0.4937615394592285, -0.8664714694023132, 0.9382677674293518, -0.24332594871520996, -1.1927541494369507, -0.32374733686447144, -0.28558576107025146, 1.3345762491226196, 0.2781962752342224, 0.6997969150543213, 0.6946612596511841, 0.9106138348579407, -0.7108992338180542, 0.12076563388109207, -0.6127504706382751, 0.844183087348938, 0.7926862239837646, -3.0078418254852295, -4.688097953796387, 3.288071393966675, -6.054235458374023, 4.552424907684326, -3.0862555503845215, -1.7986212968826294, 0.9753240942955017, -3.9383418560028076, 0.3844303786754608, 3.0347442626953125, -0.6615880727767944, 3.5687921047210693, -0.24921990931034088, -0.4441568851470947, 9.61839485168457, -0.41035205125808716, 1.4899190664291382, -1.257596492767334, -2.881753921508789, -7.935370445251465, -0.1842755824327469, 5.95803689956665, -0.23989352583885193, -0.2786122262477875, -0.7592253088951111, 0.28636634349823, 0.055064715445041656, -4.820547103881836, 0.798453688621521, 0.26175153255462646, -0.1624162793159485, -0.9888484477996826, 0.4549477994441986, -0.48587554693222046, -0.5689752101898193, -0.3641248047351837];
        const hoverText = ["Point 0", "Point 1", "Point 2", "Point 3", "Point 4", "Point 5", "Point 6", "Point 7", "Point 8", "Point 9", "Point 10", "Point 11", "Point 12", "Point 13", "Point 14", "Point 15", "Point 16", "Point 17", "Point 18", "Point 19", "Point 20", "Point 21", "Point 22", "Point 23", "Point 24", "Point 25", "Point 26", "Point 27", "Point 28", "Point 29", "Point 30", "Point 31", "Point 32", "Point 33", "Point 34", "Point 35", "Point 36", "Point 37", "Point 38", "Point 39", "Point 40", "Point 41", "Point 42", "Point 43", "Point 44", "Point 45", "Point 46", "Point 47", "Point 48", "Point 49", "Point 50", "Point 51", "Point 52", "Point 53", "Point 54", "Point 55", "Point 56", "Point 57", "Point 58", "Point 59", "Point 60", "Point 61", "Point 62", "Point 63", "Point 64", "Point 65", "Point 66", "Point 67", "Point 68", "Point 69", "Point 70", "Point 71", "Point 72", "Point 73", "Point 74", "Point 75", "Point 76", "Point 77", "Point 78", "Point 79", "Point 80", "Point 81", "Point 82", "Point 83", "Point 84", "Point 85", "Point 86", "Point 87", "Point 88", "Point 89", "Point 90", "Point 91", "Point 92", "Point 93", "Point 94", "Point 95", "Point 96", "Point 97", "Point 98", "Point 99", "Point 100", "Point 101", "Point 102", "Point 103", "Point 104", "Point 105", "Point 106", "Point 107", "Point 108", "Point 109", "Point 110", "Point 111", "Point 112", "Point 113", "Point 114", "Point 115", "Point 116", "Point 117", "Point 118", "Point 119", "Point 120", "Point 121", "Point 122", "Point 123", "Point 124", "Point 125", "Point 126", "Point 127", "Point 128", "Point 129", "Point 130", "Point 131", "Point 132", "Point 133", "Point 134", "Point 135"];
        
        // Color palette
        const colors = [
            '#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00',
            '#ffff33', '#a65628', '#f781bf', '#999999', '#66c2a5',
            '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f'
        ];
        
        // Create traces per label
        const traces = [];
        for (let i = 0; i < labels.length; i++) {
            const idx = colorIndices.map((c, j) => c === i ? j : -1).filter(j => j >= 0);
            
            traces.push({
                name: labels[i],
                x: idx.map(j => x[j]),
                y: idx.map(j => y[j]),
                z: idx.map(j => z[j]),
                text: idx.map(j => hoverText[j]),
                mode: 'markers',
                type: 'scatter3d',
                marker: {
                    size: 3,
                    color: colors[i % colors.length],
                    opacity: 0.7
                },
                hoverinfo: 'text+z'
            });
        }
        
        const layout = {
            title: '',
            autosize: true,
            showlegend: true,
            scene: {
                aspectmode: 'data',
                xaxis: { title: 'PC1', gridcolor: '#333' },
                yaxis: { title: 'PC2', gridcolor: '#333' },
                zaxis: { title: 'PC3', gridcolor: '#333' },
                bgcolor: '#1a1a2e'
            },
            paper_bgcolor: '#1a1a2e',
            plot_bgcolor: '#1a1a2e',
            legend: {
                font: { color: '#fff' },
                bgcolor: 'rgba(0,0,0,0.5)'
            },
            margin: { l: 0, r: 0, b: 0, t: 0 }
        };
        
        const config = {
            responsive: true,
            displayModeBar: true,
            modeBarButtonsToRemove: ['toImage', 'sendDataToCloud']
        };
        
        Plotly.newPlot('plot', traces, layout, config);
    </script>
</body>
</html>